import videojs from 'video.js';
var VideoJsButtonClass = videojs.getComponent('MenuButton');
var VideoJsMenuClass = videojs.getComponent('Menu');
var VideoJsComponent = videojs.getComponent('Component');
var Dom = videojs.dom;
/**
 * Convert string to title case.
 *
 * @param {string} string - the string to convert
 * @return {string} the returned titlecase string
 */

function toTitleCase(string) {
  if (typeof string !== 'string') {
    return string;
  }

  return string.charAt(0).toUpperCase() + string.slice(1);
}
/**
 * Convert string to title case.
 *
 * @param {Player} player - the string to convert
 * @return {MenuButton} the returned titlecase string
 */


export default function ConcreteButton(player) {
  var _this = this;

  var ConcreteButtonInit = new VideoJsButtonClass(player, {
    title: player.localize('Quality'),
    name: 'QualityButton',
    createItems: function createItems() {
      return [];
    },
    createMenu: function createMenu() {
      var menu = new VideoJsMenuClass(_this.player_, {
        menuButton: _this
      });
      _this.hideThreshold_ = 0; // Add a title list item to the top

      if (_this.options_.title) {
        var titleEl = Dom.createEl('li', {
          className: 'vjs-menu-title',
          innerHTML: toTitleCase(_this.options_.title),
          tabIndex: -1
        });
        var titleComponent = new VideoJsComponent(_this.player_, {
          el: titleEl
        });
        _this.hideThreshold_ += 1;
        menu.addItem(titleComponent);
      }

      _this.items = _this.createItems();

      if (_this.items) {
        // Add menu items to the menu
        for (var i = 0; i < _this.items.length; i++) {
          menu.addItem(_this.items[i]);
        }
      }

      return menu;
    }
  });
  return ConcreteButtonInit;
}